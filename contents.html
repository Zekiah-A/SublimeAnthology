<!DOCTYPE html>
<html>
<head>
  <title>Subliminal</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="styles.css">
  <style>
    .section-span {
      font-size: small;
      cursor: pointer;
      transition: height .5s;
    }

    .section-body {
      border-radius: 10px;
      border-left: 2px solid grey;
      padding-left: 5px;
      transition: transform .5s;
    }

    @media screen and (orientation:portrait) {
      .grid-container {
        display: grid;
        grid-template-columns: auto;
        padding: 10px;
        grid-gap: 10px;
      }
    }

    @media screen and (orientation:landscape) {
      .grid-container {
        display: grid;
        grid-template-columns: auto auto;
        padding: 10px;
        grid-gap: 10px;
      }
    }

    .grid-sub-container {
      display: grid;
      grid-template-columns: 20% auto;
      padding-top: 4px;
      padding-bottom: 4px;
      grid-gap: 2px;
    }

    .poem-preview {
      display: none;
      position: fixed;
      left: 20px;
      top: 200px;
      width: 250px;
      height: 400px;
      border: 2px solid grey;
      border-radius: 2px;
      background: white;
    }

    .poem-preview > iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /*Purgatory flex CSS*/
    #purgatoryFlex {
      display: flex;
      max-width: 100%;
      padding: 8px;
      flex-direction: row;
      column-gap: 16px;
      overflow-x: scroll;
      user-select: none;
      overflow-y: hidden;
    }
    entry {
      min-width: 200px;
      height: 200px;
      border-radius: 4px;
      background-color: #f2f2f2;
      position: relative;
      cursor: pointer;
      max-width: 200px;
      transition: scale 1s, rotate 1s, background-color 1s, transform 1s, z-index 1s, box-shadow 1s;
    }
    entry h4 {
      text-align: center;
      font-size: 20px;
      max-width: 100%;
      margin-left: 8px;
      margin-right: 8px;
      overflow: hidden;
      white-space: nowrap;
    }
    entry .preview {
      margin: 16px;
      position: relative;
      border-radius: 8px;
      overflow: clip;
      font-size: 16px;
    }
    entry .preview::after {
      opacity: 1;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      position: absolute;
      background: linear-gradient(#f2f2f2, transparent, #f2f2f2);
      content: "";
      transition: opacity 1s;
    }
    entry .info {
      display: flex;
      flex-direction: row;
      margin-left: 8px;
      margin-right: 8px;
    }
    .entry-new {
      rotate: 10deg;
      scale: 1.1;
      background-color: #fdfdfd;
      transform: translateX(32px);
      z-index: 1;
      box-shadow: 0px 0px 20px black;
    }

    .entry-new .preview::after {
      opacity: 0 !important;
    }

    .sounds-button{
      background: #F2F2F2;
      padding: 15px;
      border-radius: 4px;
      color: black;
      text-decoration: none;
    }

    @media(prefers-color-scheme: dark) {
      entry {
        background-color: #373737;
      }

      entry .preview::after {
        background: linear-gradient(#373737, transparent, #373737);
      }

      .sounds-button {
        background: #373737;
      }

      .entry-new {
        background-color: #606060;
      }
    }
  </style>
</head>
 
<body class="contents-div-centre" onkeydown="if(document.activeElement != searchbar) { searchbar.focus(); }">
    <h1 style="margin-top: 40px; margin-bottom: 0px;">Contents</h1>
    <!-- Sorry God, for using this forbidden language -->
    <input type="text" class="searchbar" id="searchbar" onkeyup="searchContents(this.value)" placeholder="search poems">
    <div class="poem-preview">
      <iframe src="/Volume-1/Really-Stupid-Stuff/bibbilance.html">

      </iframe>
    </div>
    <h3 style="margin-bottom: 0px;">Poem Purgatory:</h3>
    <div id="purgatoryFlex">

    </div>
    <div class="grid-container">
      <a href="Other/comments-and-complaints">[Beta] Comments and Complaints</a>
      <a href="poem-editor">+Add a Poem</a>
      <div>
        <h3>Volume 1: (Phrenes and Memes)</h3>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-1')">War and Phrenics:</span>
          <div id="section-1" class="section-body">
            <a href="./poem?path=/Volume-1/War-And-Phrenics/besusk">1. Besusk - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/the-sitting-down-of-the-opacity-brigade">2. The sitting down of the opacity brigade - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/venger">3. Venger - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/stomped">4. Stomped - By Junaid</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/bamitz">5. Bamitz - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/seppaku">6. Seppaku - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/blood-oath">7. Blood Oath - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/viiiiibraaanium">8. Viiiiibraaanium! - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/happy-old-man">9. Happy Old Man - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/tenacity">10. Tenacity - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/who-art-in-heaven">11. Who art in heaven? - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/the-ride">12. The Ride - By Axel</a>
            <br>
            <a href="./poem?path=/Volume-1/War-And-Phrenics/blitzkrieg">13. BLITZKRIEG - By Zekiah</a>
            <br>
          </div>      
        </div>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-2')">Really Stupid Stuff:</span>
          <div id="section-2" class="section-body">
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/bibbilance">1. Bibbilance - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/sylable-of-obamama">2. Sylable Of Obamama - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/hän-vaan-istu">3. Hän vaan istu - By Noah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/organs">4. Organs - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/shifty-will">5. Shifty Will - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/i-don't-write-poems">6. I don't write POEMS - By Noah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/i-saw-you-at-5:03-on-persely-road">7. I saw you at 5:03 on Persely Road - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/badges-ft-cardi-b">8. Badges (Ft Cardi B) - By Cobra</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/statude-des-amongus">9. Statude des Amongus - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/8:19:59">10. 8:19:59 - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/once-in-princess-selva's-classroom">11. Once in Princess Selva's classroom - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/effavescence">12. Effavescence - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/creativity">13. Creativity - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/this-is-(not)-the-art-of-war">14. This is (not) "the art of war" - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/trolling-my-pen">15. Trolling my Pen - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/squib-games">16. Squib Games - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/mr-fisher">17. Mr Fisher - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/skyfall">18. Skyfall - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/carbo-hydron-of-death">19. Carbo-Hydron of death - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/soyware">20. Soyware - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/jet-black">21. Jet Black - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Really-Stupid-Stuff/ten">22. TEN - By Zekiah</a>
            <br>
          </div>
        </div>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-3')">Parodies and Adaptations:</span>
          <div id="section-3" class="section-body">
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/the-interlude">1. The Interlude - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/stuff-on-the-iso">2. Stuff On The Iso - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/ink">3. Ink - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/tree-stumps">4. Tree Stumps - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/ozyandyas">5. Ozyandyas - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/public-toilet">6. Public Toilet - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/ketones">7. Ketones - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/my-first-among-us-game">8. My first Among Us game - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/composed-upon-mount-isso">9. Composed upon Mount Isso, March 22, 2022 - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-1/Parodies-And-Adaptations/the-charge-of-the-bike-brigade">10. The Charge Of The Bike Brigade - By Angelos</a><sup id="addition">new</sup>
            <br>
          </div>    
        </div>
      </div>
      <div>
        <h3>Volume 2: (Idiots and Revelations)</h3>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-4')">Idiots:</span>
          <div id="section-4" class="section-body">
            <a href="./poem?path=/Volume-2/Idiots/the-great-prison-of-america">1. The Great Prison Of America - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/industrial-society">2. Industrial Society - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/a-conclusive-thesis-on-modern-day-consumerism">3. A conclusive thesis on modern day consumerism - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/reality">4. Reality - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/a-long-road-to-al'mogus">5. A long road to Al'mogus - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/dear-liberals">6. Dear, liberals - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/old-man-consequences">7. Old Man Consequences - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/i-am-sorrounded-by-idiots">8. I am sorrounded by Idiots - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/an-unfortunate-event">9. An Unfortunate Event - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/modern-day-brockelhurst">10. Modern Day Brockelhurst - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/the-epilogue">11. The Epilogue - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/erfolgreich-wenn">12. Erfolgreich Wenn? - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/asylum">13. Asylum - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/a-doctor-of-schizophrenia">14. A doctor of Schizophrenia - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/five-a-side-footie">15. Five-a-side Footie - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/a-gay-encounter">16. A gay encounter - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/we-live-in-a-dictatorship">17. We live in a dictatorship - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/the-police-cause-all-the-chaos">18. The police cause all the chaos - By Angelos</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/suspended-in-h">19. Suspended in H - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/mifism">20. MIFISM - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/litigations">21. Litigations - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/almost-as-stone-as-a-rock">22. Almost as stone as a rock - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Idiots/cupcake-bomb">23. Cupcake Bomb - By Zekiah</a>
            <br>
         </div>
        </div>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-5')">Sublime and Revelation:</span>
          <div id="section-5" class="section-body">
            <a href="./poem?path=/Volume-2/Sublime-And-Revelation/babarian">1. Babarian - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Sublime-And-Revelation/chiss">2. Chiss - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Sublime-And-Revelation/delly">3. Delly - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Sublime-And-Revelation/spiders">4. Spiders - By Zekiah</a>
            <br>
            <a href="./poem?path=/Volume-2/Sublime-And-Revelation/a-morbin-time">5. A morbin Time - By Bushi</a>
            <br>
         </div>
        </div>
        <div class="grid-sub-container">
          <span class="section-span" onclick="toggleCollapsed('section-6')">Tales and Tomes:</span>
          <div id="section-6" class="section-body">
            <a href="./poem?path=/Volume-2/Tales-And-Tomes/the-tale-of-major-korean">1. The Tale of Major Korean - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Tales-And-Tomes/the-burial-of-herr-fischer-vi">2. The Burial of Herr Fischer VI - By Bushi</a>
            <br>
            <a href="./poem?path=/Volume-2/Tales-And-Tomes/bull-and-bush">3. Bull and Bush - By Angelos</a>
            <br>
         </div>
        </div>
      </div>
    </div>
    <h3>Other stuff:</h3>
    <h4>copypastas:</h4>
    <a href="Other/a-joke">1. A joke (Copypasta) - By Zekiah</a>
    <br>
    <a href="Other/the-redditor">2. The Redditor (Copypasta) - By Bushi</a>
    <br>
    <h4>Sussy songs:</h4>
    <a href=".">Filthy French (Lyrics) - By Zekiah (as SussZ)</a>
    <br>
    <a href=".">AQGay (Lyrics) - By Zekiah (as SussZ)</a>
    <br><br> <!--https://sounds.poemanthology.org/-->
    <a href="/sounds" class="sounds-button">Listen on subliminal sounds!</a>
    <br><br>
    what are you doing down here? lol
    <br><br>
    <a href="index" class="back"> <- Back</a>
  </body>
  <script> 
    const params = new URLSearchParams(document.location.search)
    let collapsedSections = new Set()

    let stringToHtml = text => {
      let htmlObject = document.createElement('temp')
      htmlObject.innerHTML = text
      return htmlObject.firstElementChild
    }

    function searchContents(value) {
      //search through poem, authors, etc
      document.querySelectorAll(".section-body a").forEach((elem) => {
        elem.style.display = 'inline-block'
        if (!value.toLowerCase().trim()) return
        if (!elem.textContent.toLowerCase().includes(value)) elem.style.display = 'none'
      })
      document.querySelectorAll(".section-body br").forEach((lnb) => {
        lnb.style.display = 'inline-block'          
        if (!value.toLowerCase().trim()) return
        else lnb.style.display = 'none'
      })
    }

    //style.display = "none"; //style.display="initial"
    function toggleCollapsed(sectionId) {
      if (collapsedSections.has(sectionId)) { //uncollapse
        document.getElementById(sectionId).style.transform = "initial"
        document.getElementById(sectionId).parentElement.style.height = "auto"
        collapsedSections.delete(sectionId)
        return
      } //collapse
      document.getElementById(sectionId).style.transform = "translateY(-40%) scaleY(0.2)"
      document.getElementById(sectionId).parentElement.style.height = document.getElementById(sectionId).style.height;
      collapsedSections.add(sectionId)
    } 

    async function addPurgatoryEntries() {
      let entryTemplate = await (await fetch("./Other/purgatory-entry-template")).text()
      let entriesNew = await (await fetch("https://server.poemanthology.org:81/PurgatoryNew")).json()

      for (let entry of entriesNew)
      {
        let entryData = await (await fetch("https://server.poemanthology.org:81/Purgatory/" + entry)).json()
        let newE = stringToHtml(entryTemplate.valueOf())
        newE.setAttribute("guid", entryData.guid)
        newE.querySelector("#_poemPreview").textContent = entryData.poemContent.substring(0, 56).replace(/<[^>]*>?/gm, " ") || "unknown"
        newE.querySelector("#_poemName").textContent = entryData.poemName.substring(0, 32).replace(/<[^>]*>?/gm, " ") || "unknown"
        newE.querySelector("#_poemAuthor").textContent = "By " + (entryData.poemAuthor || "unknown").substring(0, 6).replace(/<[^>]*>?/gm, "") + "..."
        newE.querySelector("#_approves").textContent = entryData.approves || 0
        newE.querySelector("#_vetoes").textContent = entryData.vetoes || 0

        purgatoryFlex.appendChild(newE)
      }

      if (!params.get("purgatorynew") || !purgatoryFlex.children[0]) return
      purgatoryFlex.children[0].classList.add("entry-new")
      window.scrollTo(0, 0)
      setTimeout(() => { purgatoryFlex.children[0].classList.remove("entry-new") }, 800)
    }

    addPurgatoryEntries()
  </script>
</html>
